
$(document).ready(function(){

var db = [
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////
    [
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/y5.jpeg)\"></div><span class=\"quote\">AHMET ÖĞÜT, SILENT UNIVERSITY </span>",
            "https://bienal.iksv.org/en/news/kunstverein-in-hamburg-and-the-17th-istanbul-biennial-announces-the-silent-university-orientation-programme",
            "Silent University announcement on the Istanbul Biennial website"
        ],
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../photos/image-58.png)\"></div><span class=\"quote\">YEHWAN SONG</span>",
            "https://yhsong.com/",
            "Yehwan Song, Very responsive, 2020"
        ],
        [
            "The Silent University is a solidarity based knowledge exchange platform by displaced people and forced migrants. It is led by a group of lecturers, consultants and research fellows. It is an education platform outside of the restrictions of migration laws, language limitations and the other bureaucratic obstacles.<span class=\"quote\">AHMET ÖĞÜT, SILENT UNIVERSITY </span>",
            "http://thesilentuniversity.org/",
            "From the Silent University website 'http://thesilentuniversity.org/'"
        ]
    ],
    [
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/y5.jpeg)\"></div><span class=\"quote\">AHMET ÖĞÜT, SILENT UNIVERSITY </span>",
            "https://www.youtube.com/watch?v=MuvFU6cwatk&ab_channel=Visible",
            "         From her interview in Idea Magazine, 2009 https://blog.saltonline.org/post/95367715734/the-bold-and-poignant-palette-of-gulsun-karamustafa "
        ],
        [
            "The Silent University aims to address and reactivate the knowledge of the participants and make the exchange process mutually beneficial by inventing alternative currencies, in place of money or free voluntary service. The Silent University’s aim is to challenge the idea of silence as a passive state, and explore its powerful potential through performance, writing, and group reflection. These explorations attempt to make apparent the systemic failure and the loss of skills and knowledge experienced through the silencing process of people seeking asylum.<span class=\"quote\">AHMET ÖĞÜT, SILENT UNIVERSITY</span>",
            "http://thesilentuniversity.org/",
            "From the Silent University website 'http://thesilentuniversity.org/'"
        ],
        [
            "The Silent University aims to address and reactivate the knowledge of the participants and make the exchange process mutually beneficial by inventing alternative currencies, in place of money or free voluntary service. The Silent University’s aim is to challenge the idea of silence as a passive state, and explore its powerful potential through performance, writing, and group reflection. These explorations attempt to make apparent the systemic failure and the loss of skills and knowledge experienced through the silencing process of people seeking asylum.<span class=\"quote\">AHMET ÖĞÜT, SILENT UNIVERSITY</span>",
            "http://thesilentuniversity.org/",
            "From the Silent University website 'http://thesilentuniversity.org/'"
        ]
    ],
    [
        [
            "Even though you set detailed and obvious criteria, the sorted data can be very generative and unexpected. It’s why I love playing with it, because even though I focus on the content, the results are always fluid and surprising. Data is more like a living creature, what it reveals and manifests itself as is very generative and unpredictable.<span class=\"quote\">YEHWAN SONG</span>",
            "https://www.itsnicethat.com/features/ones-to-watch-2020-yehwan-song-digital-240220",
            "From interview titled “Yehwan Song wants to radically change how people think about the web” by Charlie Filmer-Court, 24/2/2020 'https://www.itsnicethat.com/features/ones-to-watch-2020-yehwan-song-digital-240220'"
        ],
        [
            "<span class=\"quote\"></span>",
            "",
            ""
        ],
        [
            "<span class=\"quote\"></span>",
            "",
            ""
        ]
    ],
    [
        [
            " “I think contemporary art is the only venue that can really host freedom of speech and critical thinking,”<span class=\"quote\">         ATIF AKIN, MUTANT TIME</span>",
            "         https://www.youtube.com/watch?v=L5v-8Q4xGH4 (3:20-3:38)",
            "         Interview with Netali Zaff, 3/11/2020https://www.bupipedream.com/ac/113521/mutant-space-utilizes-interactive-technology-to-highlight-nuclear-radiation/"
        ],
        [
            "<div class=\"sep_img_inner\" style = \"background-image:url( ../photos/image-55.jpg)\"></div><span class=\"quote\">artistname-------</span>",
            null,
            "Lieko Shiga, My Husband, 2006"
        ],
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/y19.jpeg)\"></div><span class=\"quote\">artistname-------</span>",
            "https://youtube.com/watch?v=FpFBY1Ee1D0",
            "from -------------"
        ]
    ],
    [
        [
            "<div class=\"sep_img_inner\" style = \"background-image:url( ../photos/image-19.png)\"></div><span class=\"quote\">artistname-------</span>",
            null,
            "Cooking Sections, Salmon: A Red Herring, 2020. Tate Britain, Art Now. Installation view. Photo: Tate."
        ],
        [
            "“The “Serial of the Universe”, the never ending history of our wars, the terrifying hum of the earthquake, our warming air and water, our globalisation, our greeds, our angers, our rights, our economies and our crises, our road maps showing the way to European civilisation, our terror maps reaching into the depths of black holes, our genome maps, our diseases, our miraculous remedies, as well as the birds and the bees, the one-for-the-roads, the poor, the women, the children, the child abusers, the splendour and the misery of the media, the music of the spheres, and, last but not least: “All the beauty of human civilization – our art, our music, our literature – lies beyond these two fundamentalist, ideological poles.” (Roy) Our Open Site is a small flashlight, but one whose handle stretches to fit as many hands as want to hold it or hold on to it.”<span class=\"quote\">        AÇIK RADYO </span>",
            "         https://acikradyo.com.tr/manifesto-acik-radyo ",
            "         From Açık Radyo’s Manifesto, 2001https://acikradyo.com.tr/manifesto-acik-radyo "
        ],
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/y21.jpeg)\"></div><span class=\"quote\">artistname-------</span>",
            "https://youtube.com/watch?v=9_JSDnGJzpk",
            "from -------------"
        ]
    ],
    [
        [
            "<div class=\"sep_img_inner\" style = \"background-image:url( ../photos/image-58.png)\"></div><span class=\"quote\">artistname-------</span>",
            null,
            "Yehwan Song, Very responsive, 2020"
        ],
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/y16.jpeg)\"></div><span class=\"quote\">artistname-------</span>",
            "https://youtube.com/watch?v=NA_1U8xYlJM",
            "from -------------"
        ],
        [
            "It is very important to me that the bridges built between communities–the personal ties and experiences gained–continue far beyond each project. Art is the vehicle, the pretext for a conversation and for an exchange of ideas that incorporate the material as well as the personal for its execution. <span class=\"quote\">         LAURA ANDERSON BARBATA </span>",
            "         https://www.youtube.com/watch?v=zRzYfaUCCXI (2:06-2:19) ",
            "          From her interview with Firstindigo&lifestyle, 26/7/2016 https://firstindigoandlifestyle.com/2016/07/26/artist-in-focus-laura-anderson-barbata/ "
        ]
    ],
    [
        [
            "<div class=\"sep_img_inner\" style = \"background-image:url( ../photos/image-3.jpg)\"></div><span class=\"quote\">artistname-------</span>",
            null,
            ""
        ],
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/v2.jpeg)\"></div><span class=\"quote\">artistname-------</span>",
            "https://vimeo.com/39085094",
            "from -------------"
        ],
        [
            "“For me, a mobile cheese making unit is playing on those contradictions: making cheese entails changing the state of matter from liquid to solid; it is microbiological livestock management and an ancient pastoralist biotechnology. The wish to learn it fast, in one morning workshop, deals with our wish for instant gratification. The “authentic” foods we yearn for could also be accessible, self-made, and not elite gastronomic merchandise. It’s a way to reconnect with food makers and the problems they face. Food is therefore more than a political tool, it has become politics in itself.”<span class=\"quote\">         arthere website announcing the footsteps library when it is published          FERNANDO GARCÍA-DORY</span>",
            "         https://www.fernandogarciadory.info/index.php?/texts/interview-artpapers-janfeb-2011/2/ ",
            "         From his interview titled BENEATH THE BUREAUCRACY, THE BEACH by Chris Fite-Wassilak https://www.fernandogarciadory.info/index.php?/texts/interview-artpapers-janfeb-2011/2/ "
        ]
    ],
    [
        [
            "<div class=\"sep_img_inner\" style = \"background-image:url( ../photos/image-35.png)\"></div><span class=\"quote\">artistname-------</span>",
            null,
            "Charles Lim, SEA STATE 9: proclamation : DRAG PROP POUR, 2018, courtesy of Charles Lim "
        ],
        [
            " These expressions have the capacity to cross boundaries, and they invite us to honour traditions. Through the process, we recognize ourselves in the work and build art-based social-practice projects that result in long-term exercises of reciprocity and collaboration.<span class=\"quote\">         LAURA ANDERSON BARBATA </span>",
            "         https://www.youtube.com/watch?v=zRzYfaUCCXI (2:06-2:19) ",
            "          From her interview with Madeline Murphy Turner for MoMAPost 20/01/2021https://post.moma.org/making-waves-a-conversation-with-laura-anderson-barbata/ "
        ],
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/y25.jpeg)\"></div><span class=\"quote\">artistname-------</span>",
            "https://youtube.com/watch?v=L5v-8Q4xGH4",
            "from -------------"
        ]
    ],
    [
        [
            "“The “Flag Project” is designed to study and develop collective creativity. I implement an “open art system,” in which art is defined as broadly as possible, to break through rigid discourses and established values, engaging in democratic dialogue, but also taking a critical approach when needed. During this process, outcomes—artworks or other forms—are produced collectively, collaboratively or individually. Another aim is to create and maintain a network that enables the exchange of ideas and experiences, or development in the form of collaborations.”<span class=\"quote\">         ARAHMAIANI FEISAL </span>",
            "         https://www.cobosocial.com/dossiers/arahmaiani-superheroine-of-indonesian-contemporary-art/ ",
            "         In her statetement titled “My Second Life in Tibet”, August 2016 http://www.trfineart.com/wp-content/uploads/2016/08/AAP79_SecondLifeInTibet_Arahmaiani.pdf "
        ],
        [
            "<div class=\"sep_img_inner\" style = \"background-image:url( ../photos/image-56.jpg)\"></div><span class=\"quote\">artistname-------</span>",
            null,
            "Sim Chi Yin, from the series \"Interventions,\" 2020. Original archive image: Imperial War Museums collection, pigment print on foil, 59.4 x 42 cm, Ed. 3 + 2, AP"
        ],
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/y4.jpeg)\"></div><span class=\"quote\">artistname-------</span>",
            "https://youtube.com/watch?v=OP4bl2mRxuE",
            "from -------------"
        ]
    ],
    [
        [
            " In the process of exchange, in sharing and learning from each other, we agree on what we will give and what we would like to receive, and in this way, all participants become stakeholders in the project.<span class=\"quote\">         LAURA ANDERSON BARBATA </span>",
            "         https://www.youtube.com/watch?v=zRzYfaUCCXI (2:06-2:19) ",
            "          From her interview with Madeline Murphy Turner for MoMAPost 20/01/2021https://post.moma.org/making-waves-a-conversation-with-laura-anderson-barbata/ "
        ],
        [
            "<div class=\"sep_img_inner\" style = \"background-image:url( ../photos/image-54.jpg)\"></div><span class=\"quote\">artistname-------</span>",
            null,
            "Lieko Shiga, Portrait of Cultivation from series Rasen Kaigen, 2010 "
        ],
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/v10.jpeg)\"></div><span class=\"quote\">artistname-------</span>",
            "https://vimeo.com/60612832",
            "from -------------"
        ]
    ],
    [
        [
            "“I wanted to turn the ruins into sculptures because they carry for me the memory of something lost, yet at the same time they are reminders of what is no longer there. A fragment. Yet complete in its own way because any attempt to fix it, will erase its uniqueness. It teaches nothing, except that what was once is gone and the only way to approach it is through art without direct reference to an event.”<span class=\"quote\">        LIDA ABDUL </span>",
            "         http://www.artvehicle.com/interview/1 ",
            "         From interview on http://www.artvehicle.com/interview/1 "
        ],
        [
            "<div class=\"sep_img_inner\" style = \"background-image:url( ../photos/image-49.jpg)\"></div><span class=\"quote\">artistname-------</span>",
            null,
            "What I learned I no longer know; the little I still know I guessed, 2009"
        ],
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/v3.jpeg)\"></div><span class=\"quote\">artistname-------</span>",
            "https://vimeo.com/43867573",
            "from -------------"
        ]
    ],
    [
        [
            "“I feel that I can easily cross cultural borders. I think that is what is wonderful about not having a fixed notion of identity or nationhood. There is really nothing I have a duty to do. It bothers people, this refusal to choose between us and them because I guess when you announce your identity publicly people know what to expect. If I were to identify with anything, it would be Afghanistan because it's a country that needs so much attention.”<span class=\"quote\">        LIDA ABDUL </span>",
            "         http://www.artvehicle.com/interview/1 ",
            "         From interview on http://www.artvehicle.com/interview/1 "
        ],
        [
            "<div class=\"sep_img_inner\" style = \"background-image:url( ../photos/image-21.jpg)\"></div><span class=\"quote\">artistname-------</span>",
            null,
            "Eva Egermann, Hold off, but hold me (with texts by Ianina Ilitcheva) Installation view, Central Garden, 2020, courtesy the artist, photo: Kunsthalle Wien"
        ],
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/y8.jpeg)\"></div><span class=\"quote\">artistname-------</span>",
            "https://youtube.com/watch?v=NKREFr_Wtc4",
            "from -------------"
        ]
    ],
    [
        [
            " “ We were really interested in how we could use it as a tool to think about emancipating or decolonizing contemporary food practices. The whole project tried to think of counterapproaches to buying and selling. If the neoliberal world has appropriated the language of sustainability, can we do it the other way around and appropriate neoliberal tools to challenge the logic of the franchise and think of it in terms of value beyond profit margins? We’re interested in the original French meaning of “franchise” as releasing oneself from servitude.<span class=\"quote\">                     COOKING SECTIONS, SURVEY PACK WALLOWLANDS</span>",
            "         https://www.frieze.com/article/eating-end-world ",
            "         From their interview titled FOOD STUDIES: A CONVERSATION WITH COOKING SECTIONS on Art News with Elizabeth Fullerton, 14/06/2018https://www.artnews.com/art-in-america/interviews/food-studies-a-conversation-with-cooking-sections-56484/ "
        ],
        [
            "<div class=\"sep_img_inner\" style = \"background-image:url( ../photos/image-36.png)\"></div><span class=\"quote\">artistname-------</span>",
            null,
            "Pictures from Renato’s Posidonia Oceanica project proposal"
        ],
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/y14.jpeg)\"></div><span class=\"quote\">artistname-------</span>",
            "https://youtube.com/watch?v=iIkl9-6qINk",
            "from -------------"
        ]
    ],
    [
        [
            "<div class=\"sep_img_inner\" style = \"background-image:url( ../photos/image-43.jpg)\"></div><span class=\"quote\">artistname-------</span>",
            null,
            "Bruno Taut’s house in Ortaköy, Istanbul"
        ],
        [
            " “A lot of the decisions on how elements are placed and in dialogue with each and with the space came from listening to the material one by one. So, listening to each stone, listening to the rails, and seeing how these elements are transmitting and emitting sound.” <span class=\"quote\">            TAREK ATOUI, I/E ISTANBUL </span>",
            "         https://www.ibraaz.org/interviews/130 ",
            "         From his interview with FridericiANVM, 23/10/2020https://fridericianum.org/tarek-atoui-interview/ (3:14-3:32)"
        ],
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/y12.jpeg)\"></div><span class=\"quote\">artistname-------</span>",
            "https://youtube.com/watch?v=M6yoT-CXey4",
            "from -------------"
        ]
    ],
    [
        [
            "“Art needs to update its own techniques as fast as the industry or politics in order to be able to respond to all of this, to produce something about these social codes or to say something about the historical field. <span class=\"quote\">        ATIF AKIN, MUTANT TIME</span>",
            "         https://www.youtube.com/watch?v=L5v-8Q4xGH4 (3:20-3:38)",
            "         From his interview with Digilogue, 02/01/2020 https://www.youtube.com/watch?v=L5v-8Q4xGH4 (3:20-3:38)"
        ],
        [
            "<div class=\"sep_img_inner\" style = \"background-image:url( ../photos/image-2.png)\"></div><span class=\"quote\">artistname-------</span>",
            null,
            ""
        ],
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/y26.jpeg)\"></div><span class=\"quote\">artistname-------</span>",
            "https://youtube.com/watch?v=ALl-byTmE-E",
            "from -------------"
        ]
    ],
    [
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/y18.jpeg)\"></div><span class=\"quote\">artistname-------</span>",
            "https://youtube.com/watch?v=LfmUouW1ZuA",
            "from -------------"
        ],
        [
            "“It is by micro-political acting that we want to participate in making the city more ecological and more democratic, to make the space of proximity less dependent on top-down processes and more accessible to its users. The ‘self-managed architecture’ is an architecture of relationships, processes and agencies of persons, desires, skills and know-hows. Such an architecture does not correspond to a liberal practice but asks for new forms of association and collaboration, based on exchange and reciprocity and involving all those interested (individuals, organisations, institutions), whatever is their scale.”<span class=\"quote\">        ATELIER D’ARCHITECTURE AUTOGEREE </span>",
            "         https://www.urbantactics.org/about/ ",
            "         from their website https://www.urbantactics.org/about/ "
        ],
        [
            "<div class=\"sep_img_inner\" style = \"background-image:url( ../photos/image-61.jpg)\"></div><span class=\"quote\">artistname-------</span>",
            null,
            "Screenshot from Sriwhana Spong’s a hook but no fish 2017, film still. Courtesy of the artist and Michael Lett"
        ]
    ],
    [
        [
            "<div class=\"sep_img_inner\" style = \"background-image:url( ../photos/image-24.jpg)\"></div><span class=\"quote\">artistname-------</span>",
            null,
            "Fernando Garcia Dory, Monologue "
        ],
        [
            "“It's not about this mangrove moving perfectly, it's about all of us coming together and obsessing about this machine, for months. It's about a way of thinking. If we talk about all these issues; we need to come together — it's not one person that's gonna save the world. <span class=\"quote\">        MARTHA ATIENZA </span>",
            "         https://www.adobomagazine.com/the-magazine/martha-atienzas-equation-of-state-using-video-art-and-island-technology-to-illuminate-the-effects-of-climate-change-in-bantayan-islands-coastal-communities-and-the-importan/ (1:00-1:22) ",
            "         From her interview with Adobo Magazine https://www.adobomagazine.com/the-magazine/martha-atienzas-equation-of-state-using-video-art-and-island-technology-to-illuminate-the-effects-of-climate-change-in-bantayan-islands-coastal-communities-and-the-importan/ (1:00-1:22) "
        ],
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/y2.jpeg)\"></div><span class=\"quote\">artistname-------</span>",
            "https://youtube.com/watch?v=kNaxM_L5GOg",
            "from -------------"
        ]
    ],
    [
        [
            "“Our architecture is at the same time political and poetic as it aims above all to ‘create relationships between worlds’.”<span class=\"quote\">         ATELIER D’ARCHITECTURE AUTOGEREE </span>",
            "         https://www.urbantactics.org/about/ ",
            "         from their website https://www.urbantactics.org/about/ "
        ],
        [
            "<div class=\"sep_img_inner\" style = \"background-image:url( ../photos/image-59.png)\"></div><span class=\"quote\">artistname-------</span>",
            null,
            "Yehwan Song, Very responsive, 2020"
        ],
        [
            "<div class=\"sep_img_inner sep_img_inner_0 sep_img_inner_whole_0\" style = \"background-image:url( ../thumbnails/y27.jpeg)\"></div><span class=\"quote\">artistname-------</span>",
            "https://youtube.com/watch?v=upwfIEYmFBw",
            "from -------------"
        ]
    ]
]




for (var i = 0; i <3; i++) {
    for (var j = 0; j < db[i].length ; j++) {

        if(db[i][j][0].split('url(').length>1){
            source = '<img src='+db[i][j][0].split('url(')[1].split(')')[0]+'>'
        }else{
            source = '<div>'+db[i][j][0].split('<span class=\"quote\">')[0]+'</div>'
        }
        artist = db[i][j][0].split('<span class=\"quote\">')[1].split('</span>')[0]
        if(db[i][j][2].split('http').length>1){
                credit = db[i][j][2].split('http')[0]+'<br><a href="'+('http'+db[i][j][2].split('http')[1])+'">'+'http'+db[i][j][2].split('http')[1]+'</a>'
            }else{
                credit = db[i][j][2]
            }
    $('.credit_wrapper').append('<div class="source_credit">'+source+'<span class="artist_credit">'+artist+'</span><span class="credit_credit">'+credit+'</span></div>')
    }
}










    var inittime_h = new Date().toString().split(' ')[4].split(':')[0]
    var initrotation = inittime_h/24
    console.log(initrotation)
    var timeoffset = 0


    var scene = new THREE.Scene();
    var layer_amount = 18


    var whole_pivot = new THREE.Group()
    var layer_pivot_array = Array(layer_amount)
    var layer_material_array = Array(layer_amount)
    var plate_pivot_array = Array(layer_amount)
    var light1, light2

    var whole_pivot_cloned = new THREE.Group()
    var layer_pivot_array_cloned = Array(layer_amount)
    var layer_material_array_cloned = Array(layer_amount)
    var plate_pivot_array_cloned = Array(layer_amount)
    var light1_cloned, light2_cloned
    whole_pivot_cloned.visible = false
    console.log(scene)

    var translatey = 15
    var translatez = 10
    var staying = 5
    var zoomed_out = false
    var zoomed_out_counter = 0
    var canvas , renderer , whole_light
    var selected = 0
    var hovered = 0
    const loader = new THREE.TextureLoader();

    var credit_on = false

    var scene_dis = 100000
    var scrolldirection_value = 0
    var scrolling_value = [[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]]
    var light1_value = [0,4.5]
    var light2_value = [0,0.15]
    var whole_light_value = [1,0.5]

    var raycaster_obj = []
    var raycaster_obj_link = []
    for (var i = db.length - layer_amount; i < db.length; i++) {
        if(db[i][0].length>1){
            if(typeof db[i][0][1]==='string'){raycaster_obj_link.push(db[i][0][1].split('(')[0])}else{raycaster_obj_link.push('')}
            
        }else{
            raycaster_obj_link.push('')
        }
        if(db[i][1].length>1){
            if(typeof db[i][1][1]==='string'){raycaster_obj_link.push(db[i][1][1].split('(')[0])}else{raycaster_obj_link.push('')}
            
        }else{
            raycaster_obj_link.push('')
        }
        if(db[i][2].length>1){
            if(typeof db[i][2][1]==='string'){raycaster_obj_link.push(db[i][2][1].split('(')[0])}else{raycaster_obj_link.push('')}
            
        }else{
            raycaster_obj_link.push('')
        }
        if(i == db.length-1){
            console.log(raycaster_obj_link)
        }
    }
    var speed = 1000

        var scrollpos = 10
    var w = $("body").prop("clientWidth");
    var h = window.innerHeight
    $('.fake_scroll').css({'height':((2)*translatey*h)+'px'})

    $('.fake_scroll_wrapper').scrollTop(2*translatey*h*initrotation)
    if(window.location.hash && window.location.hash.split('#')[1] === 'URSULA-BIEMANN') {
        $('.fake_scroll_wrapper').scrollTop((translatey*h)*(5))
    }
    if(window.location.hash && window.location.hash.split('#')[1] === '// LAURA-ANDERSON-BARBATA') {
        $('.fake_scroll_wrapper').scrollTop((translatey*h)*(8))
    }
        scene.add(whole_pivot)
var scrollcounter = 0

    $('.fake_scroll_wrapper').scroll(function (event) {
        scrollcounter++
        if(scrollcounter>10){
                $('.scrolldown').hide()}
            scrollpos = $('.fake_scroll_wrapper').scrollTop()+1+timeoffset;
        var k = Math.floor(scrollpos/(translatey*h)) 
        selected = k

                if(scrollpos > scrolldirection_value){
                    scrolldirection = 'down'
                }else{
                    scrolldirection = 'up'
                }
                scrolldirection_value = scrollpos

                whole_pivot_cloned.rotation.y = degrees_to_radians(scrollpos%(translatey*h)/(translatey*h)*360)
                whole_pivot.rotation.y = degrees_to_radians(scrollpos%(translatey*h)/(translatey*h)*360)

                get_scrolling_value(scrollpos,k,false)


    });
    function get_scrolling_value(scrollpos,k,auto){
                var transition_unit = 0
                if(scrollpos%(translatey*h) < (staying*h)){
                    // console.log('1')
                            scrolling_value[0][0] = translatey*1.98
                            scrolling_value[0][1] = 4.0
                            scrolling_value[0][2] = 4.0

                            scrolling_value[1][0] = translatey*0.997
                            scrolling_value[1][1] = 2.5
                            scrolling_value[1][2] = 2.5

                            scrolling_value[2][0] = translatey*0.07
                            scrolling_value[2][1] = 1
                            scrolling_value[2][2] = 1

                            scrolling_value[3][0] = translatey*-0.76
                            scrolling_value[3][1] = 0.45
                            scrolling_value[3][2] = 0.45

                            scrolling_value[4][0] = translatey*-0.73
                            scrolling_value[4][1] = 0.2
                            scrolling_value[4][2] = 0.2

                            scrolling_value[5][0] = translatey*-0.73
                            scrolling_value[5][1] = 0.15
                            scrolling_value[5][2] = 0.15

                            scrolling_value[6][0] = translatey*-0.73
                            scrolling_value[6][1] = 0
                            scrolling_value[6][2] = 0

                }else{
                    // console.log('2')
                        transition_unit = ((scrollpos%(translatey*h)-(staying*h))/((translatey*h)-(staying*h)))*10
                        
                            scrolling_value[0][0] = map_range(transition_unit, 0, 10, translatey*1.98, translatey*1.98)
                            scrolling_value[0][1] = map_range(transition_unit, 0, 10, 4.0, 10.0) 
                            scrolling_value[0][2] = map_range(transition_unit, 0, 10, 4.0, 10.0)

                        
                            scrolling_value[1][0] = map_range(transition_unit, 0, 10, translatey*0.997, translatey*1.98)
                            scrolling_value[1][1] = map_range(transition_unit, 0, 10, 2.5, 4.0)
                            scrolling_value[1][2] = map_range(transition_unit, 0, 10, 2.5, 4.0)

                        
                            scrolling_value[2][0] = map_range(transition_unit, 0, 10, translatey*0.07, translatey*0.997)
                            scrolling_value[2][1] = map_range(transition_unit, 0, 10, 1, 2.5)
                            scrolling_value[2][2] = map_range(transition_unit, 0, 10, 1, 2.5)

                        
                            scrolling_value[3][0] = map_range(transition_unit, 0, 10, translatey*-0.76, translatey*0.07)
                            scrolling_value[3][1] = map_range(transition_unit, 0, 10, 0.45, 1)
                            scrolling_value[3][2] = map_range(transition_unit, 0, 10, 0.45, 1)

                        
                            scrolling_value[4][0] = map_range(transition_unit, 0, 10, translatey*-0.73, translatey*-0.76)
                            scrolling_value[4][1] = map_range(transition_unit, 0, 10, 0.2, 0.45)
                            scrolling_value[4][2] = map_range(transition_unit, 0, 10, 0.2, 0.45)

                        
                            scrolling_value[5][0] = map_range(transition_unit, 0, 10, translatey*-0.73, translatey*-0.73)
                            scrolling_value[5][1] = map_range(transition_unit, 0, 10, 0.15, 0.2)
                            scrolling_value[5][2] = map_range(transition_unit, 0, 10, 0.15, 0.2)

                        
                            scrolling_value[6][0] = map_range(transition_unit, 0, 10, translatey*-0.73, translatey*-0.73)
                            scrolling_value[6][1] = map_range(transition_unit, 0, 10, 0, 0.15)
                            scrolling_value[6][2] = map_range(transition_unit, 0, 10, 0, 0.15)
                }
                scrolling(scrollpos,k,auto)
    }

    function scrolling(scrollpos,k,auto){
        console.log('1')
        hover()
        // console.log('---------------'+scrollpos+'---------------'+k+'---------------'+(selected))
                if(!zoomed_out){
                    for (var i = layer_pivot_array_cloned.length - 1; i >= 0; i--) {
                        if(i>selected){
                            if(i>(layer_pivot_array_cloned.length-10)){
                                layer_pivot_array_cloned[i].position.y = -1*translatey*0.4-1*translatey*0.0000175*((i-selected)*(i-selected)*(i-selected)*(i-selected))
                            }
                        }else{
                            layer_pivot_array_cloned[i].position.y = translatey*0.4
                        }
                    }
                    for (var i = layer_pivot_array.length - 1; i >= 0; i--) {
                        if(!auto){layer_pivot_array[i].visible = false}
                        layer_pivot_array_cloned[i].visible = true
                    }
                    if(layer_pivot_array[k-2]){
                        layer_pivot_array[k-2].visible = true
                            layer_pivot_array[k-2].position.y = scrolling_value[0][0]
                            layer_pivot_array[k-2].scale.x = scrolling_value[0][1]
                            layer_pivot_array[k-2].scale.z = scrolling_value[0][2]
                        }

                    if(layer_pivot_array[k-1]){
                        layer_pivot_array[k-1].visible = true
                            layer_pivot_array[k-1].position.y = scrolling_value[1][0]
                            layer_pivot_array[k-1].scale.x = scrolling_value[1][1]
                            layer_pivot_array[k-1].scale.z = scrolling_value[1][2]
                        }

                    if(layer_pivot_array[k-0]){
                        layer_pivot_array[k-0].visible = true
                            layer_pivot_array[k-0].position.y = scrolling_value[2][0]
                            layer_pivot_array[k-0].scale.x = scrolling_value[2][1]
                            layer_pivot_array[k-0].scale.z = scrolling_value[2][2]
                        }

                    if(layer_pivot_array[k+1]){
                        layer_pivot_array[k+1].visible = true
                            layer_pivot_array[k+1].position.y = scrolling_value[3][0]
                            layer_pivot_array[k+1].scale.x = scrolling_value[3][1]
                            layer_pivot_array[k+1].scale.z = scrolling_value[3][2]
                        }

                    if(layer_pivot_array[k+2]){
                        layer_pivot_array[k+2].visible = true
                            layer_pivot_array[k+2].position.y = scrolling_value[4][0]
                            layer_pivot_array[k+2].scale.x = scrolling_value[4][1]
                            layer_pivot_array[k+2].scale.z = scrolling_value[4][2]
                        }

                    if(layer_pivot_array[k+3]){
                        layer_pivot_array[k+3].visible = true
                            layer_pivot_array[k+3].position.y = scrolling_value[5][0]
                            layer_pivot_array[k+3].scale.x = scrolling_value[5][1]
                            layer_pivot_array[k+3].scale.z = scrolling_value[5][2]
                        }

                    if(layer_pivot_array[k+4]){
                        layer_pivot_array[k+4].visible = true
                            layer_pivot_array[k+4].position.y = scrolling_value[6][0]
                            layer_pivot_array[k+4].scale.x = scrolling_value[6][1]
                            layer_pivot_array[k+4].scale.z = scrolling_value[6][2]
                        }
                }else{
                    for (var i = layer_pivot_array.length - 1; i >= 0; i--) {
                        if(i>selected){
                            layer_pivot_array[i].position.y = -1*translatey*0.4
                            if(i>(layer_pivot_array.length-10)){
                                layer_pivot_array[i].position.y = -1*translatey*0.4-1*translatey*0.0000175*((i-selected)*(i-selected)*(i-selected)*(i-selected))
                            }
                        }else{
                            layer_pivot_array[i].position.y = translatey*0.4
                            // layer_pivot_array[i].scale.x = 1.1 
                            // layer_pivot_array[i].scale.z = 1.1 
                        }
                        // if(i==layer_pivot_array.length-3){
                        //     layer_pivot_array[i].position.y = -1*translatey*0.4-10
                        // }
                        // if(i==layer_pivot_array.length-2){
                        //     layer_pivot_array_cloned[i].position.y = -1*translatey*0.4-10
                        // }
                        // if(i==layer_pivot_array.length-1){
                        //     layer_pivot_array[i].position.y = -1*translatey*0.4-10
                        // }
                    }
                    for (var i = layer_pivot_array_cloned.length - 1; i >= 0; i--) {
                        if(!auto){layer_pivot_array_cloned[i].visible = false}
                        layer_pivot_array[i].visible = true
                    }
                    if(layer_pivot_array_cloned[k-2]){
                        layer_pivot_array_cloned[k-2].visible = true
                            layer_pivot_array_cloned[k-2].position.y = scrolling_value[0][0]
                            layer_pivot_array_cloned[k-2].scale.x = scrolling_value[0][1]
                            layer_pivot_array_cloned[k-2].scale.z = scrolling_value[0][2]
                        }

                    if(layer_pivot_array_cloned[k-1]){
                        layer_pivot_array_cloned[k-1].visible = true
                            layer_pivot_array_cloned[k-1].position.y = scrolling_value[1][0]
                            layer_pivot_array_cloned[k-1].scale.x = scrolling_value[1][1]
                            layer_pivot_array_cloned[k-1].scale.z = scrolling_value[1][2]
                        }

                    if(layer_pivot_array_cloned[k-0]){
                        layer_pivot_array_cloned[k-0].visible = true
                            layer_pivot_array_cloned[k-0].position.y = scrolling_value[2][0]
                            layer_pivot_array_cloned[k-0].scale.x = scrolling_value[2][1]
                            layer_pivot_array_cloned[k-0].scale.z = scrolling_value[2][2]
                        }

                    if(layer_pivot_array_cloned[k+1]){
                        layer_pivot_array_cloned[k+1].visible = true
                            layer_pivot_array_cloned[k+1].position.y = scrolling_value[3][0]
                            layer_pivot_array_cloned[k+1].scale.x = scrolling_value[3][1]
                            layer_pivot_array_cloned[k+1].scale.z = scrolling_value[3][2]
                        }

                    if(layer_pivot_array_cloned[k+2]){
                        layer_pivot_array_cloned[k+2].visible = true
                            layer_pivot_array_cloned[k+2].position.y = scrolling_value[4][0]
                            layer_pivot_array_cloned[k+2].scale.x = scrolling_value[4][1]
                            layer_pivot_array_cloned[k+2].scale.z = scrolling_value[4][2]
                        }

                    if(layer_pivot_array_cloned[k+3]){
                        layer_pivot_array_cloned[k+3].visible = true
                            layer_pivot_array_cloned[k+3].position.y = scrolling_value[5][0]
                            layer_pivot_array_cloned[k+3].scale.x = scrolling_value[5][1]
                            layer_pivot_array_cloned[k+3].scale.z = scrolling_value[5][2]
                        }

                    if(layer_pivot_array_cloned[k+4]){
                        layer_pivot_array_cloned[k+4].visible = true
                            layer_pivot_array_cloned[k+4].position.y = scrolling_value[6][0]
                            layer_pivot_array_cloned[k+4].scale.x = scrolling_value[6][1]
                            layer_pivot_array_cloned[k+4].scale.z = scrolling_value[6][2]
                        }
                }
                render()
    }
const views = [
    {
        left: 0,
        bottom: 0,
        width: 1,
        height: 1,
        eye: [ 0, 0, 4.5 ],
        fov: 110,
        init_eye: [ 0, 0, 4.5 ],
        init_fov: 110,
        shifted_eye: [ 0, 310, 340 ],
        shifted_fov: 10,
        lookAt :new THREE.Vector3( 0, 0, 0 )
    },
    {
        left: 0.01,
        bottom: 0.01,
        width: 0.325,
        height: 0.325,
        eye: [ 0, 310, 340+scene_dis ],
        fov: 10,
        init_eye: [ 0, 310, 340+scene_dis ],
        init_fov: 10,
        shifted_eye: [ 0, 0, 4.5+scene_dis ],
        shifted_fov: 110,
        lookAt :new THREE.Vector3( 0, 0, scene_dis )
    },
];
if(w<h){
    views[0].fov=125
}
$(document).click(function(e){
    console.log('hey')
    var x = e.clientX;
    var y = e.clientY;
    if(x>w - w * views[1].width - h * views[1].left && y< (h * views[1].bottom+h * views[1].height) && !credit_on){
        if(zoomed_out){
            zoom_in()
            return false
        }else{
            zoom_out()
            return false
        }
    }else if(x>w - w * views[1].width - h * views[1].left && y< (h * views[1].bottom+h * views[1].height)   +  $('.source_btn').outerHeight()*1.15 && !credit_on){

    }else if(!credit_on){
        if(raycaster_obj_link[hovered]===''||zoomed_out){

        }else{
            window.open(raycaster_obj_link[hovered], '_blank').focus();
        }
    }
})
init()
function init(){

    $('.fake_scroll').append('<div class="view_hover"></div>')
    $('.fake_scroll').append('<div class="source_btn">source</div>')

    $('.view_hover').css({'left':Math.floor( w - w * views[1].width - h * views[1].left) +'px'})
    $('.view_hover').css({'top':Math.floor( h * views[1].bottom) +'px'})
    $('.view_hover').css({'width':Math.floor( w * views[1].width) +'px'})
    $('.view_hover').css({'height': Math.floor( h * views[1].height) +'px'})
    $('.source_btn').css({'top':(Math.floor( h * views[1].bottom)+Math.floor( h * views[1].height)) +'px'})
    $('.source_btn').css({'left':Math.floor( w - w * views[1].width - h * views[1].left) +'px'})


    canvas = document.getElementById("canvas");

 
$('.source_btn').click(function(){
    $('.credit_wrapper').show()
    credit_on = true
})
$('.close').click(function(){
    $('.credit_wrapper').hide()
    credit_on = false
    return false
})





    renderer = new THREE.WebGLRenderer( { antialias: true, canvas: canvas } );
    renderer.setPixelRatio( window.devicePixelRatio );
    renderer.setSize( $('.fake_scroll').outerWidth(), window.innerHeight );
    renderer.setClearColor( 0x000000 );//0x );

    renderer.toneMapping = THREE.LinearToneMapping;
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFShadowMap;


console.log( $('.fake_scroll').outerWidth())
console.log( window.innerWidth)

    for ( let ii = 0; ii < views.length;  ii++ ) {
        const view = views[ ii ];
        const camera = new THREE.PerspectiveCamera( view.fov, $('.fake_scroll').outerWidth()/ window.innerHeight, 1, 10000 );
        // console.log(camera)
        view.camera = camera;
    }



    const near = 450;
    const far = 510;
    // const near = 10;
    // const far = 60;
    scene.fog = new THREE.Fog(0x000000, near, far);

                light1 = new THREE.SpotLight( 0x391fff );
                light1.position.set( 100, 10, 0 );
                light1.penumbra = 1;
                light1.distance = 200;
                light1.intensity = light1_value[0];
                light1.angle = Math.PI / 8;
                scene.add( light1 );

                light2 = new THREE.PointLight( 0xffffff );
                light2.position.set( 0, -15, 0 );
                light2.intensity = light2_value[0];
                scene.add( light2 );

                whole_light = new THREE.AmbientLight( 0xffffff );
                whole_light.position.set( 0, 0, 0 );
                whole_light.intensity = whole_light_value[0];
                scene.add( whole_light );


    create_board()
}
function create_board(){
    for (var i = 0; i < layer_amount; i++) {
        layer_pivot_array[i] = new THREE.Group()
        whole_pivot.add(layer_pivot_array[i])
        plate_pivot_array[i] = Array(layer_amount-i+2)
        var texture
        if((layer_amount-i)==18){
            console.log('he')
            texture = loader.load( "img/bgn-01.png" );
        }else if((layer_amount-i)==17){
            texture = loader.load( "img/bgn-02.png" );
        }else if((layer_amount-i)==16){
            texture = loader.load( "img/bgn-03.png" );
        }else{
            texture = loader.load( "img/bg-"+pad(layer_amount-i, 2)+".png" );
        }

        layer_material_array[i] = Array(plate_pivot_array[i].length)
        layer_material_array_cloned[i] = Array(plate_pivot_array[i].length)
                      raycaster_obj.push([])
                      raycaster_obj.push([])
                      raycaster_obj.push([])
        // layer_material_array[i].repeat.x = 1/(layer_amount+2)

            for (var k = 0; k < plate_pivot_array[i].length; k++) {
                const geometry = new THREE.PlaneGeometry(get_width(translatez,plate_pivot_array[i].length),translatey );
                geometry.faceVertexUvs[0][0][0].x = (plate_pivot_array[i].length-k+0)/(plate_pivot_array[i].length)
                geometry.faceVertexUvs[0][0][1].x = (plate_pivot_array[i].length-k+0)/(plate_pivot_array[i].length)
                geometry.faceVertexUvs[0][0][2].x = (plate_pivot_array[i].length-k-1)/(plate_pivot_array[i].length)
                geometry.faceVertexUvs[0][1][0].x = (plate_pivot_array[i].length-k+0)/(plate_pivot_array[i].length)
                geometry.faceVertexUvs[0][1][2].x = (plate_pivot_array[i].length-k-1)/(plate_pivot_array[i].length)
                geometry.faceVertexUvs[0][1][1].x = (plate_pivot_array[i].length-k-1)/(plate_pivot_array[i].length)
                // console.log(plate_pivot_array[i].length-k+0)
        if((layer_amount-i)==18){
                layer_material_array[i][k] = new THREE.MeshPhongMaterial( {map: texture, side: THREE.DoubleSide, color:0xffffff} );
                layer_material_array_cloned[i][k] = new THREE.MeshBasicMaterial( {map: texture, side: THREE.DoubleSide, color:0xffffff} );
        }else if((layer_amount-i)==17){

                layer_material_array[i][k] = new THREE.MeshPhongMaterial( {map: texture, side: THREE.DoubleSide, color:0xffffff} );
                layer_material_array_cloned[i][k] = new THREE.MeshBasicMaterial( {map: texture, side: THREE.DoubleSide, color:0xffffff} );
        }else if((layer_amount-i)==16){

                layer_material_array[i][k] = new THREE.MeshPhongMaterial( {map: texture, side: THREE.DoubleSide, color:0xffffff} );
                layer_material_array_cloned[i][k] = new THREE.MeshBasicMaterial( {map: texture, side: THREE.DoubleSide, color:0xffffff} );
        }else{

                layer_material_array[i][k] = new THREE.MeshPhongMaterial( {map: texture, side: THREE.DoubleSide, color:0xffffff} );
                layer_material_array_cloned[i][k] = new THREE.MeshBasicMaterial( {map: texture, side: THREE.DoubleSide, color:0xffffff} );
        }
                // const material = new THREE.MeshBasicMaterial( {map: layer_material_array[i], side: THREE.DoubleSide, color:0xffffff} );
                const plate = new THREE.Mesh( geometry, layer_material_array[i][k] );
                      plate.position.z = translatez
                        if(i==0){
                            if(k<8){
                                raycaster_obj[raycaster_obj.length-1].push(plate)
                            }else if(k<16){
                                raycaster_obj[raycaster_obj.length-2].push(plate)
                            }else{
                                raycaster_obj[raycaster_obj.length-3].push(plate)
                            }
                        }else if(i==1){
                            if(k<11){
                                raycaster_obj[raycaster_obj.length-1].push(plate)
                            }else if(k<8){
                                raycaster_obj[raycaster_obj.length-2].push(plate)
                            }else{
                                raycaster_obj[raycaster_obj.length-3].push(plate)
                            }
                        }else if(i==2){
                            if(k<10){
                                raycaster_obj[raycaster_obj.length-1].push(plate)
                            }else if(k<10){
                                raycaster_obj[raycaster_obj.length-2].push(plate)
                            }else{
                                raycaster_obj[raycaster_obj.length-3].push(plate)
                            }
                        }else if(plate_pivot_array[i].length%3==0){
                                if(k<Math.floor(plate_pivot_array[i].length/3)){
                                    raycaster_obj[raycaster_obj.length-1].push(plate)
                                }else if(k<Math.floor(plate_pivot_array[i].length/3)*2){
                                    raycaster_obj[raycaster_obj.length-2].push(plate)
                                }else{
                                    raycaster_obj[raycaster_obj.length-3].push(plate)
                                }
                              $(this).find('.text_inner_content').css({'width':33.333333 + '%'})
                            }else if(plate_pivot_array[i].length%3==1){
                                if(k<Math.floor(plate_pivot_array[i].length/3)){
                                    raycaster_obj[raycaster_obj.length-1].push(plate)
                                }else if(k<Math.floor(plate_pivot_array[i].length/3)*2+1){
                                    raycaster_obj[raycaster_obj.length-2].push(plate)
                                }else{
                                    raycaster_obj[raycaster_obj.length-3].push(plate)
                                }
                            }else{
                                if(k<Math.floor(plate_pivot_array[i].length/3)+0){
                                    raycaster_obj[raycaster_obj.length-1].push(plate)
                                }else if(k<Math.floor(plate_pivot_array[i].length/3)*2+1){
                                    raycaster_obj[raycaster_obj.length-2].push(plate)
                                }else{
                                    raycaster_obj[raycaster_obj.length-3].push(plate)
                                }
                            }
                            console.log(raycaster_obj)
                const edges = new THREE.EdgesGeometry( geometry );
                const plate_line = new THREE.LineSegments( edges, new THREE.LineBasicMaterial( { color: 0xffffff } ) );
                      plate_line.position.z = translatez

                plate_pivot_array[i][k] = new THREE.Group()
                plate_pivot_array[i][k].rotation.y = degrees_to_radians(360/(plate_pivot_array[i].length)*k)
                plate_pivot_array[i][k].add(plate)
                plate_pivot_array[i][k].add(plate_line)
                layer_pivot_array[i].add( plate_pivot_array[i][k] );

                if(k == (plate_pivot_array[i].length-1)&& i == (layer_amount-1)){
                    clone_board()
                }
            }
    }
}
function clone_board(){
                    whole_pivot_cloned = whole_pivot.clone()
                    whole_pivot_cloned.position.z = scene_dis

                    for (var m = whole_pivot_cloned.children.length - 1; m >= 0; m--) {

                        layer_pivot_array_cloned[m] = whole_pivot_cloned.children[m]
                        layer_pivot_array_cloned[m].scale.y = 1.1
                        layer_pivot_array_cloned[m].scale.x = get_rad(translatey,plate_pivot_array[m].length)/translatez
                        layer_pivot_array_cloned[m].scale.z = get_rad(translatey,plate_pivot_array[m].length)/translatez
                            // console.log(layer_pivot_array_cloned[m])
                            for (var i = layer_pivot_array_cloned[m].children.length - 1; i >= 0; i--) {
                                // layer_pivot_array_cloned[m].children[i].children[0].material = layer_material_array_cloned[m][i]
                            }
                            
                    }
                    scene.add( whole_pivot_cloned)
                    render()
                    setTimeout(function(){
                            render()},1000)

}
function render(){
                for ( let ii = 0; ii < views.length; ii++ ) {

                    const view = views[ ii ];
                    const camera = view.camera;


                    const left = Math.floor( w - w * view.width - h * view.left );
                    const bottom = Math.floor( h * view.bottom );
                    const width = Math.floor( w * view.width );
                    const height = Math.floor( h * view.height );

                    renderer.setViewport( left, bottom, width, height );
                    renderer.setScissor( left, bottom, width, height );
                    renderer.setScissorTest( true );
                    renderer.setClearColor( view.background );

                    camera.aspect = width / height;
                    camera.lookAt(view.lookAt)
                    // console.log(view.fov)
                    camera.fov = view.fov
                    // console.log(view.eye)
                    camera.position.fromArray( view.eye );
                    // console.log(scene.children[0].children[selected].position)
                    // console.log(view.lookAt)
                    // console.log(whole_pivot_cloned.position)
                    camera.updateProjectionMatrix();

                    renderer.render( scene, camera );
                    // console.log(scene)

                }
}
function easeInQuart(k){
    x = k/speed
    return x * x * x * x * speed;
}
function easeInQuad(k){
    x = k/speed
    return x * x * speed;
}
function easeOutQuint(k) {
    x = k/speed
    return (1 - Math.pow(1 - x, 5)) * speed;
}
function easeInCubic(k){
    x = k/speed
    return x * x * x * speed;
}

function easeOutSine(k) {
    x = k/speed
    return (Math.sin((x *  Math.PI) / 2))*speed;
}
function easeOutCubic(k) {
    x = k/speed
    return (1 - Math.pow(1 - x, 3))*speed;
}
function zooming(zoomed_out_counter){
    $('.gradient').css({'opacity':map_range(easeInQuad(zoomed_out_counter),0,speed,1,0)})

    whole_pivot.rotation.y = degrees_to_radians(scrollpos%(translatey*h)/(translatey*h)*360+map_range(easeInQuad(zoomed_out_counter),0,speed,0,360))
    whole_pivot_cloned.rotation.y = degrees_to_radians(scrollpos%(translatey*h)/(translatey*h)*360+map_range(easeInQuad(zoomed_out_counter),0,speed,0,360))
    light1.intensity = map_range(easeInQuad(zoomed_out_counter),0,speed,light1_value[0],light1_value[1]);
    light2.intensity = map_range(easeInQuad(zoomed_out_counter),0,speed,light2_value[0],light2_value[1]);
    whole_light.intensity = map_range(easeInQuad(zoomed_out_counter),0,speed,whole_light_value[0],whole_light_value[1]);

    for ( let ii = 0; ii < views.length;  ii++ ) {
        const view = views[ ii ];
        if(ii == 0){
                view.eye[0] = map_range(easeInQuad(zoomed_out_counter),0,speed,view.init_eye[0],view.shifted_eye[0])
                view.eye[1] = map_range(easeInQuad(zoomed_out_counter),0,speed,view.init_eye[1],view.shifted_eye[1])
                view.eye[2] = map_range(easeInQuad(zoomed_out_counter),0,speed,view.init_eye[2],view.shifted_eye[2])
                view.fov = map_range(easeOutCubic(zoomed_out_counter),0,speed,view.init_fov,view.shifted_fov)
            }else{
                view.eye[0] = map_range(easeOutCubic(zoomed_out_counter),0,speed,view.init_eye[0],view.shifted_eye[0])
                view.eye[1] = map_range(easeOutCubic(zoomed_out_counter),0,speed,view.init_eye[1],view.shifted_eye[1])
                view.eye[2] = map_range(easeOutCubic(zoomed_out_counter),0,speed,view.init_eye[2],view.shifted_eye[2])
                view.fov = map_range(easeInQuad(zoomed_out_counter),0,speed,view.init_fov,view.shifted_fov)
            }
    }
    for (var i = layer_pivot_array.length - 1; i >= 0; i--) {
        if(i>=selected-2 && i<= selected+4){
            layer_pivot_array[i].scale.x = map_range(zoomed_out_counter,0,speed,scrolling_value[i-(selected-2)][1],get_rad(translatey,plate_pivot_array[i].length)/translatez)
            layer_pivot_array[i].scale.y = map_range(zoomed_out_counter,0,speed,1,1.1)
            layer_pivot_array[i].scale.z = map_range(zoomed_out_counter,0,speed,scrolling_value[i-(selected-2)][1],get_rad(translatey,plate_pivot_array[i].length)/translatez)
        }else if(i>selected+4){
            layer_pivot_array[i].scale.x = map_range(zoomed_out_counter,0,speed,0,get_rad(translatey,plate_pivot_array[i].length)/translatez)
            layer_pivot_array[i].scale.y = map_range(zoomed_out_counter,0,speed,1,1.1)
            layer_pivot_array[i].scale.z = map_range(zoomed_out_counter,0,speed,0,get_rad(translatey,plate_pivot_array[i].length)/translatez)
        }else{
            layer_pivot_array[i].scale.x = map_range(zoomed_out_counter,0,speed,5+(i-(selected+4)*0.1),get_rad(translatey,plate_pivot_array[i].length)/translatez)
            layer_pivot_array[i].scale.y = map_range(zoomed_out_counter,0,speed,1,1.1)
            layer_pivot_array[i].scale.z = map_range(zoomed_out_counter,0,speed,5+(i-(selected+4)*0.1),get_rad(translatey,plate_pivot_array[i].length)/translatez)
        }
            // if(zoomed_out){
            //     if(i>selected){
            //         layer_pivot_array[i].position.y = -1*translatey*0.4
            //     }else{
            //         layer_pivot_array[i].position.y = translatey*0.4
            //     }
            // }else{
            //     if(i>selected){
            //         layer_pivot_array_cloned[i].position.y = -1*translatey*0.4
            //     }else{
            //         layer_pivot_array_cloned[i].position.y = translatey*0.4
            //     }
            // }

        if(i == selected-2){
                layer_pivot_array_cloned[i].scale.x = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[selected-2].length)/translatez,scrolling_value[0][1])
                layer_pivot_array_cloned[i].scale.y = map_range(zoomed_out_counter,0,speed,1.1, 1)
                layer_pivot_array_cloned[i].scale.z = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[selected-2].length)/translatez,scrolling_value[0][2])
                    if(i>selected){
                        layer_pivot_array_cloned[i].position.y = map_range(zoomed_out_counter,0,speed,-1*translatey*0.4,scrolling_value[0][0])
                        layer_pivot_array[i].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[0][0],-1*translatey*0.4)
                    }else{
                        layer_pivot_array_cloned[i].position.y = map_range(zoomed_out_counter,0,speed,translatey*0.4,scrolling_value[0][0])
                        layer_pivot_array[i].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[0][0],translatey*0.4)
                    }
            }

        else if(i == selected-1){
                layer_pivot_array_cloned[selected-1].scale.x = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[selected-1].length)/translatez,scrolling_value[1][1])
                layer_pivot_array_cloned[selected-1].scale.y = map_range(zoomed_out_counter,0,speed,1.1, 1)
                layer_pivot_array_cloned[selected-1].scale.z = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[selected-1].length)/translatez,scrolling_value[1][2])
                    if(i>selected){
                        layer_pivot_array_cloned[selected-1].position.y = map_range(zoomed_out_counter,0,speed,-1*translatey*0.4,scrolling_value[1][0])
                        layer_pivot_array[selected-1].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[1][0],-1*translatey*0.4)
                    }else{
                        layer_pivot_array_cloned[selected-1].position.y = map_range(zoomed_out_counter,0,speed,translatey*0.4,scrolling_value[1][0])
                        layer_pivot_array[selected-1].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[1][0],translatey*0.4)
                    }
            }

        else if(i == selected-0){
                layer_pivot_array_cloned[selected-0].scale.x = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[selected-0].length)/translatez,scrolling_value[2][1])
                layer_pivot_array_cloned[selected-0].scale.y = map_range(zoomed_out_counter,0,speed,1.1, 1)
                layer_pivot_array_cloned[selected-0].scale.z = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[selected-0].length)/translatez,scrolling_value[2][2])
                    if(i>selected){
                        layer_pivot_array_cloned[selected-0].position.y = map_range(zoomed_out_counter,0,speed,-1*translatey*0.4,scrolling_value[2][0])
                        layer_pivot_array[selected-0].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[2][0],-1*translatey*0.4)
                    }else{
                        layer_pivot_array_cloned[selected-0].position.y = map_range(zoomed_out_counter,0,speed,translatey*0.4,scrolling_value[2][0])
                        layer_pivot_array[selected-0].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[2][0],translatey*0.4)
                    }
            }

        else if(i == selected+1){
                layer_pivot_array_cloned[selected+1].scale.x = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[selected+1].length)/translatez,scrolling_value[3][1])
                layer_pivot_array_cloned[selected+1].scale.y = map_range(zoomed_out_counter,0,speed,1.1, 1)
                layer_pivot_array_cloned[selected+1].scale.z = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[selected+1].length)/translatez,scrolling_value[3][2])
                    if(i>selected){
                        layer_pivot_array_cloned[selected+1].position.y = map_range(zoomed_out_counter,0,speed,-1*translatey*0.4,scrolling_value[3][0])
                        layer_pivot_array[selected+1].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[3][0],-1*translatey*0.4)
                    }else{
                        layer_pivot_array_cloned[selected+1].position.y = map_range(zoomed_out_counter,0,speed,translatey*0.4,scrolling_value[3][0])
                        layer_pivot_array[selected+1].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[3][0],translatey*0.4)
                    }
            }

        else if(i == selected+2){
                layer_pivot_array_cloned[selected+2].scale.x = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[selected+2].length)/translatez,scrolling_value[4][1])
                layer_pivot_array_cloned[selected+2].scale.y = map_range(zoomed_out_counter,0,speed,1.1, 1)
                layer_pivot_array_cloned[selected+2].scale.z = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[selected+2].length)/translatez,scrolling_value[4][2])
                    if(i>selected){
                        layer_pivot_array_cloned[selected+2].position.y = map_range(zoomed_out_counter,0,speed,-1*translatey*0.4,scrolling_value[4][0])
                        layer_pivot_array[selected+2].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[4][0],-1*translatey*0.4)
                    }else{
                        layer_pivot_array_cloned[selected+2].position.y = map_range(zoomed_out_counter,0,speed,translatey*0.4,scrolling_value[4][0])
                        layer_pivot_array[selected+2].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[4][0],translatey*0.4)
                    }
            }

        else if(i == selected+3){
                layer_pivot_array_cloned[selected+3].scale.x = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[selected+3].length)/translatez,scrolling_value[5][1])
                layer_pivot_array_cloned[selected+3].scale.y = map_range(zoomed_out_counter,0,speed,1.1, 1)
                layer_pivot_array_cloned[selected+3].scale.z = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[selected+3].length)/translatez,scrolling_value[5][2])
                    if(i>selected){
                        layer_pivot_array_cloned[selected+3].position.y = map_range(zoomed_out_counter,0,speed,-1*translatey*0.4,scrolling_value[5][0])
                        layer_pivot_array[selected+3].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[5][0],-1*translatey*0.4)
                    }else{
                        layer_pivot_array_cloned[selected+3].position.y = map_range(zoomed_out_counter,0,speed,translatey*0.4,scrolling_value[5][0])
                        layer_pivot_array[selected+3].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[5][0],translatey*0.4)
                    }
            }

        else if(i == selected+4){
                layer_pivot_array_cloned[selected+4].scale.x = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[selected+4].length)/translatez,scrolling_value[6][1])
                layer_pivot_array_cloned[selected+4].scale.y = map_range(zoomed_out_counter,0,speed,1.1, 1)
                layer_pivot_array_cloned[selected+4].scale.z = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[selected+4].length)/translatez,scrolling_value[6][2])
                    if(i>selected){
                        layer_pivot_array_cloned[selected+4].position.y = map_range(zoomed_out_counter,0,speed,-1*translatey*0.4,scrolling_value[6][0])
                        layer_pivot_array[selected+4].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[6][0],-1*translatey*0.4) 
                    }else{
                        layer_pivot_array_cloned[selected+4].position.y = map_range(zoomed_out_counter,0,speed,translatey*0.4,scrolling_value[6][0])
                        layer_pivot_array[selected+4].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[6][0],translatey*0.4) 
                    }
            }
        else if(i>selected+4 && i<=(layer_pivot_array_cloned.length-10)){
            layer_pivot_array_cloned[i].scale.x = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[i].length)/translatez,0)
            layer_pivot_array_cloned[i].scale.y = map_range(zoomed_out_counter,0,speed,1.1,1)
            layer_pivot_array_cloned[i].scale.z = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[i].length)/translatez,0)
                    if(i>selected){
                        layer_pivot_array_cloned[i].position.y = map_range(zoomed_out_counter,0,speed,-1*translatey*0.4,scrolling_value[6][0])
                        layer_pivot_array[i].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[6][0],-1*translatey*0.4) 
                    }else{
                        layer_pivot_array_cloned[i].position.y = map_range(zoomed_out_counter,0,speed,translatey*0.4,scrolling_value[6][0])
                        layer_pivot_array[i].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[6][0],translatey*0.4) 
                    }
        }
        else if(i<selected-2){
            layer_pivot_array_cloned[i].scale.x = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[i].length)/translatez,5+(i-(selected+4)*0.1))
            layer_pivot_array_cloned[i].scale.y = map_range(zoomed_out_counter,0,speed,1.1,1)
            layer_pivot_array_cloned[i].scale.z = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[i].length)/translatez,5+(i-(selected+4)*0.1))
                    if(i>selected){
                        layer_pivot_array_cloned[i].position.y = map_range(zoomed_out_counter,0,speed,-1*translatey*0.4,scrolling_value[0][0])
                        layer_pivot_array[i].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[0][0],-1*translatey*0.4)
                    }else{
                        layer_pivot_array_cloned[i].position.y = map_range(zoomed_out_counter,0,speed,translatey*0.4,scrolling_value[0][0])
                        layer_pivot_array[i].position.y = map_range(zoomed_out_counter,0,speed,scrolling_value[0][0],translatey*0.4)
                    }
        }
        if(i>(layer_pivot_array_cloned.length-10)){
            layer_pivot_array_cloned[i].scale.x = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[i].length)/translatez,0)
            layer_pivot_array_cloned[i].scale.y = map_range(zoomed_out_counter,0,speed,1.1,1)
            layer_pivot_array_cloned[i].scale.z = map_range(zoomed_out_counter,0,speed,get_rad(translatey,plate_pivot_array[i].length)/translatez,0)
                layer_pivot_array_cloned[i].position.y = map_range(easeInQuad(zoomed_out_counter),
                                                                    0,
                                                                    speed,
                                                                    -1*translatey*0.4-1*translatey*0.0000175*((i-selected)*(i-selected)*(i-selected)*(i-selected)),
                                                                    scrolling_value[6][0])
                layer_pivot_array[i].position.y = map_range(easeInQuad(zoomed_out_counter),
                                                            0,
                                                            speed,
                                                            scrolling_value[6][0],
                                                            -1*translatey*0.4-1*translatey*0.0000175*((i-selected)*(i-selected)*(i-selected)*(i-selected)))
        }
    }


}
function zoom_out(){

    zoomed_out = true
    zoomed_out_counter ++ 

    // ///mainview zoomout
    if(zoomed_out_counter == 1){
        for (var i = layer_pivot_array.length - 1; i >= 0; i--) {
            layer_pivot_array[i].visible = true
        }
    }
    ///sideview zoomin
    if(zoomed_out_counter == speed){
        for (var i = layer_pivot_array_cloned.length - 1; i >= 0; i--) {
            layer_pivot_array_cloned[i].visible = false
        }
    }
    if(zoomed_out_counter<=speed){
        setTimeout(function(){
            zoom_out()
        },1)
        zooming(zoomed_out_counter)  
    }else{
            scrollpos = $('.fake_scroll_wrapper').scrollTop()+timeoffset;
            get_scrolling_value(scrollpos,selected,false)
    }
    render()

}

function zoom_in(){

    zoomed_out = false
    zoomed_out_counter --

    if(zoomed_out_counter == 1){
        for (var i = layer_pivot_array.length - 1; i >= 0; i--) {
            layer_pivot_array[i].visible = true
        }
    }
    ///sideview zoomin
    if(zoomed_out_counter == speed){
        for (var i = layer_pivot_array_cloned.length - 1; i >= 0; i--) {
        }
    }


    if(zoomed_out_counter>0){
        setTimeout(function(){
            zoom_in()
        },1)
        zooming(zoomed_out_counter)  
    }else{
            scrollpos = $('.fake_scroll_wrapper').scrollTop()+timeoffset;
            // console.log(selected)
            get_scrolling_value(scrollpos,selected,false)
    }
    render()
}

// window.addEventListener( 'resize', function () {
//   camera1.aspect = window.innerWidth / window.innerHeight;
//   camera1.updateProjectionMatrix();
//   renderer.setSize( window.innerWidth, window.innerHeight );
// }, false );






var raycaster = new THREE.Raycaster();
var mouse = new THREE.Vector2();
var selected = 0

$('canvas').mousemove(function(e){
                console.log('h')
                mousepos_x = e.pageX
                mousepos_y = e.pageY
                $('.scrolldown').css({'left':e.pageX+'px','top':(e.pageY)+'px'})
    event.preventDefault();

    mouse.x = ( event.clientX / renderer.domElement.clientWidth ) * 2 - 1;
    mouse.y = - ( event.clientY / renderer.domElement.clientHeight ) * 2 + 1;


    raycaster.setFromCamera( mouse, views[0].camera );
    for (var i = 0; i <  raycaster_obj.length; i++) {
        var intersects = raycaster.intersectObjects(raycaster_obj[i]); 
        if ( intersects.length > 0 ) {
                mousepos_x = e.pageX
                mousepos_y = e.pageY
                $('.scrolldown').css({'left':e.pageX+'px','top':(e.pageY)+'px'})
            hovered = i
            hover(hovered)
            return false
        }
    }


})
function hover(){
    for (var i = layer_pivot_array.length - 1; i >= 0; i--) {
        layer_pivot_array[i]
        if(i>(layer_pivot_array.length-0)){
            for (var k = layer_pivot_array[i].children.length - 1; k >= 0; k--) {
                layer_pivot_array[i].children[k].children[0].material.color = new THREE.Color(0x000000)
            }
        }else if(i>(layer_pivot_array.length-1)){
            for (var k = layer_pivot_array[i].children.length - 1; k >= 0; k--) {
                layer_pivot_array[i].children[k].children[0].material.color = new THREE.Color(0x1D1E1E)
            }
        }else if(i>(layer_pivot_array.length-2)){
            for (var k = layer_pivot_array[i].children.length - 1; k >= 0; k--) {
                layer_pivot_array[i].children[k].children[0].material.color = new THREE.Color(0x3D403E)
            }
        }else if(i>(layer_pivot_array.length-3)){
            for (var k = layer_pivot_array[i].children.length - 1; k >= 0; k--) {
                layer_pivot_array[i].children[k].children[0].material.color = new THREE.Color(0x656B67)
            }
        }else if(i>(layer_pivot_array.length-4)){
            for (var k = layer_pivot_array[i].children.length - 1; k >= 0; k--) {
                layer_pivot_array[i].children[k].children[0].material.color = new THREE.Color(0x656B67)
            }
        }else if(i>(layer_pivot_array.length-5)){
            for (var k = layer_pivot_array[i].children.length - 1; k >= 0; k--) {
                layer_pivot_array[i].children[k].children[0].material.color = new THREE.Color(0x838B85)
            }
        }else if(i>(layer_pivot_array.length-6)){
            for (var k = layer_pivot_array[i].children.length - 1; k >= 0; k--) {
                layer_pivot_array[i].children[k].children[0].material.color = new THREE.Color(0xADB8B0)
            }
        }else if(i>(layer_pivot_array.length-7)){
            for (var k = layer_pivot_array[i].children.length - 1; k >= 0; k--) {
                layer_pivot_array[i].children[k].children[0].material.color = new THREE.Color(0xDADFDB)
            }
        }else{
            for (var k = layer_pivot_array[i].children.length - 1; k >= 0; k--) {
                layer_pivot_array[i].children[k].children[0].material.color = new THREE.Color(0xFFFFFF)
            }
        }
        if(i == selected+2){
            console.log('------------')
            for (var k = layer_pivot_array[i].children.length - 1; k >= 0; k--) {
                layer_pivot_array[i].children[k].children[0].material.color = new THREE.Color(0xADB8B0)
            }
        }
        if(i == selected+3){
            console.log('------------')
            for (var k = layer_pivot_array[i].children.length - 1; k >= 0; k--) {
                layer_pivot_array[i].children[k].children[0].material.color = new THREE.Color(0x3D403E)
            }
        }
        if(i == selected+4){
            console.log('------------')
            for (var k = layer_pivot_array[i].children.length - 1; k >= 0; k--) {
                layer_pivot_array[i].children[k].children[0].material.color = new THREE.Color(0x3D403E)
            }
        }
    }
    for (var k = raycaster_obj[hovered].length - 1; k >= 0; k--) {
        if(raycaster_obj_link[hovered]===''){

        }else{
                raycaster_obj[hovered][k].material.color = new THREE.Color(0x199b82)
        }
    }
    render()

}

                            // if(cellamount%3==0){
                            //   $(this).find('.text_inner_content').css({'width':33.333333 + '%'})
                            // }else if(cellamount%3==1){
                            //   $(this).find('.text_inner_content_1').css({'width':100/cellamount*Math.floor(cellamount/3) + '%'})
                            //   $(this).find('.text_inner_content_2').css({'width':100/cellamount*Math.floor(cellamount/3)+100/cellamount + '%'})
                            //   $(this).find('.text_inner_content_3').css({'width':100/cellamount*Math.floor(cellamount/3) + '%'})
                            // }else{
                            //   $(this).find('.text_inner_content_1').css({'width':100/cellamount*Math.floor(cellamount/3)+100/cellamount + '%'})
                            //   $(this).find('.text_inner_content_2').css({'width':100/cellamount*Math.floor(cellamount/3)+100/cellamount + '%'})
                            //   $(this).find('.text_inner_content_3').css({'width':100/cellamount*Math.floor(cellamount/3) + '%'})
                            // }



timeplay()
function timeplay(){
    document.title = String(new Date()).substring(4).split(' GMT')[0]
    setTimeout(function(){timeplay()},1000)
    timeoffset = timeoffset +10
    if(Math.floor(timeoffset/30) == timeoffset/30){
            scrollcounter++
            scrollpos = $('.fake_scroll_wrapper').scrollTop()+1+timeoffset;
            console.log()
            var k = Math.floor(scrollpos/(translatey*h)) 
            selected = k
            if(scrollpos > scrolldirection_value){
                scrolldirection = 'down'
            }else{
                scrolldirection = 'up'
            }
            scrolldirection_value = scrollpos
            whole_pivot_cloned.rotation.y = degrees_to_radians(scrollpos%(translatey*h)/(translatey*h)*360)
            whole_pivot.rotation.y = degrees_to_radians(scrollpos%(translatey*h)/(translatey*h)*360)
            get_scrolling_value(scrollpos,k,true)
        }
}
function parseDate(str) {
    var mdy = str.split('/');
    return new Date(2021, 10, 19);
}


    function map_range(value, low1, high1, low2, high2) {
        return low2 + (high2 - low2) * (value - low1) / (high1 - low1);
    }

    function pad(n, width, z) {
      z = z || '0';
      n = n + '';
      return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;
    }

    function get_width(translatez,number_of_board){
        return translatez*Math.tan((360/(number_of_board*2)) * Math.PI / 180)   *2
    }

    function get_rad(width,number_of_board){
        return (width/2)/Math.tan((360/(number_of_board*2)) * Math.PI / 180)
    }

    function degrees_to_radians(degrees){
        var pi = Math.PI;
        return degrees * (pi/180);
    }
})

